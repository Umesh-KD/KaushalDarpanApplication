<div class="container-fluid p-3 py-5 bg-primary text-white text-center">
  <h3 class="mt-0 text-white">Citizen suggestions</h3>
  <p class="mb-0">If you have any Suggestion/Query for any department or college please fill the form</p>
  <a routerLink="/citizensuggestionTrack" class="btn bg-info text-white mt-3">Track Enquiry Status</a>
</div>

<div class="container-fluid AboutSection position-relative" style="background: #deebff !important;">
  <img src="/assets/home/img/shape1.png" class="position-absolute shape2 left_image_bounce" />
  <div class="container-xl position-relative">
    <div class="row">

      <div class="col-lg-12 col-md-12 col-sm-12 col-12">
        <form [formGroup]="CitizenSuggestionFormGroup" id="CitizenSuggestionFormGroup" class="form-horizontal">
          <div class="card">
            <div class="card-body">
              <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3">
                  <label for="txtuserName" class="text-gray-800 text-sm font-medium inline-block mb-1">Apply Suggestion/Query For <span class="StarMarking">*</span></label>
                  <select class="form-select" [(ngModel)]="selectedOption" formControlName="ddlCommnID" (change)="GetMasterSubDDL()">
                    <option value="0" selected>--Choose Option--</option>
                    <!--<option value="87" selected>College</option>-->
                    <option *ngFor="let item of QueryForMasterList" value="{{item.ID}}">{{item.Name}}</option>
                  </select>
                  <div *ngIf="isSubmitted&&_CitizenSuggestionFormGroup.ddlCommnID.errors" class="text-danger">
                    <p *ngIf="!_CitizenSuggestionFormGroup.ddlCommnID.errors.DropdownValidators">
                      <i aria-hidden="true"></i>Apply Suggestion/Query For field is required .!
                    </p>
                  </div>
                </div>
              </div>
              <!-- Wrapper for ngSwitch -->
             
              <div>
                <div class="row">
                  <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3" *ngIf="IsInstitute">
                    <label>Division<span class="StarMarking">*</span></label>
                    <select formControlName="ddlDivisionID" class="form-select" (change)="OnDivisionChange()"
                            [(ngModel)]="request.DivisionID">
                      <option value="0">--Select--</option>
                      <option *ngFor="let division of DivisionMasterList" [value]="division.ID">{{division.Name}}</option>
                    </select>

                    <div *ngIf="isSubmitted&&_CitizenSuggestionFormGroup.ddlDivisionID.errors" class="text-danger">
                      <p *ngIf="!_CitizenSuggestionFormGroup.ddlDivisionID.errors.DropdownValidators">
                        <i aria-hidden="true"></i>This field is required .!
                      </p>
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3" *ngIf="IsInstitute">
                    <label>District<span class="StarMarking">*</span></label>
                    <select formControlName="ddldistrictID" class="form-select" (change)="onDistrictChange()"
                            [(ngModel)]="request.DistrictID">
                      <option value="0">--Select--</option>
                      <option *ngFor="let item of DistrictMasterList" [value]="item.ID">
                        {{item.Name}}
                      </option>
                    </select>
                    <div *ngIf="isSubmitted&&_CitizenSuggestionFormGroup.ddldistrictID.errors" class="text-danger">
                      <p *ngIf="!_CitizenSuggestionFormGroup.ddldistrictID.errors.DropdownValidators">
                        <i aria-hidden="true"></i>This field is required .!
                      </p>
                    </div>
                  </div>


                  <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3" *ngIf="IsInstitute">
                    <label class="text-gray-800 text-sm font-medium inline-block mb-1">
                      Name Of Institute <span class="StarMarking">*</span>
                    </label>
                    <select formControlName="InstituteID" class="form-select" [(ngModel)]="request.InstituteID">
                      <option value="0">--Select--</option>
                      <option *ngFor="let item of InstituteMasterList" [value]="item.ID">{{item.Name}}</option>
                    </select>
                    <div *ngIf="isSubmitted&&_CitizenSuggestionFormGroup.InstituteID.errors" class="text-danger">
                      <p *ngIf="!_CitizenSuggestionFormGroup.InstituteID.errors.DropdownValidators">
                        <i aria-hidden="true"></i>This field is required .!
                      </p>
                    </div>
                  </div>


                  <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3">
                    <label class="text-gray-800 text-sm font-medium inline-block mb-1">Name <span class="StarMarking">*</span></label>
                    <input type="text" class="form-input  form-control" placeholder="Enter Name" name="Name"
                           [(ngModel)]="request.Name" formControlName="Name">
                    <div *ngIf="isSubmitted && _CitizenSuggestionFormGroup.Name.errors" class="text-danger">
                      <p *ngIf="_CitizenSuggestionFormGroup.Name.errors.required">
                        <i aria-hidden="true"></i> Name field is
                        required.!
                      </p>
                    </div>
                  </div>
                  <!-- ✅ Email -->
                  <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3">
                    <label class="text-gray-800 text-sm font-medium inline-block mb-1">Email <span class="StarMarking">*</span></label>
                    <input type="email"
                           class="form-input form-control"
                           placeholder="Enter Email" [(ngModel)]="request.Email"
                           name="Email"
                           formControlName="Email" />
                    <ng-container *ngIf="isSubmitted && CitizenSuggestionFormGroup.get('Email') as emailControl">
                      <div *ngIf="emailControl.errors" class="text-danger">
                        <p *ngIf="emailControl.errors['required']">
                          <i aria-hidden="true"></i> Email field is required.!
                        </p>
                        <p *ngIf="emailControl.errors['email']">
                          <i aria-hidden="true"></i> Please enter a valid email.!
                        </p>
                      </div>
                    </ng-container>
                  </div>

                  <!-- ✅ Mobile No. -->
                  <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3">
                    <label class="text-gray-800 text-sm font-medium inline-block mb-1">Contact No. <span class="StarMarking">*</span></label>
                    <input type="text"
                           class="form-input form-control"
                           placeholder="XXXXXX3866"
                           formControlName="MobileNo" [(ngModel)]="request.MobileNo"
                           maxlength="10"
                           (change)="request.MobileNo = filterNumber(CitizenSuggestionFormGroup.get('MobileNo')?.value)" />
                    <ng-container *ngIf="isSubmitted && CitizenSuggestionFormGroup.get('MobileNo') as mobileControl">
                      <div *ngIf="mobileControl.errors" class="text-danger">
                        <p *ngIf="mobileControl.errors['required']">
                          <i aria-hidden="true"></i> Contact No. field is required.!
                        </p>
                        <p *ngIf="mobileControl.errors['maxlength']">
                          <i aria-hidden="true"></i> Contact No. must be 10 digits.!
                        </p>
                        <p *ngIf="mobileControl.errors['pattern']">
                          <i aria-hidden="true"></i> Contact No. must be digits only.!
                        </p>
                      </div>
                    </ng-container>
                  </div>
                  <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3">
                    <label for="ddlSubject" class="text-gray-800 text-sm font-medium inline-block mb-1">Subject <span class="StarMarking">*</span></label>
                    <select class="form-select" formControlName="ddlSubject" [(ngModel)]="request.SubjectId">
                      <option value="0" selected>--Choose Option--</option>


                      <option *ngFor="let item of SubMasterList" value="{{item.ID}}">{{item.Name}}</option>
                    </select>
                    <div *ngIf="isSubmitted&& _CitizenSuggestionFormGroup.ddlSubject.errors" class="text-danger">
                      <p *ngIf="!_CitizenSuggestionFormGroup.ddlSubject.errors.DropdownValidators">
                        <i aria-hidden="true"></i>Subject field is required .!
                      </p>
                    </div>
                  </div>


                  <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3">
                    <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
                           for="fileStudentPhoto">Attachments</label>
                    <div class="flex fileUploader">
                      <input class="block  form-control form-input w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 dark:text-gray-400 focus:outline-none dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400"
                             type="file" (change)="onFilechange($event,'Photo')">

                      <a href="{{appsettingConfig.StaticFileRootPathURL + '/' + request.AttchFilePath}}" *ngIf="this.request.AttchFilePath !=''"
                         class="btn bg-primary text-white m-0" target="_blank"><i class="ti ti-eye"></i></a>
                      <!--<label for="fileStudentPhoto">
                        <span>Choose File</span>
                        {{request.AttchFilePath === '' ? 'No File Choosen' : request.AttchFilePath}}
                      </label>-->
                      <!--<div class="flex">

                      <a href="javascript:void(0);" class="btn bg-danger text-white m-0"
                         (click)="DeleteImage(request.AttchFilePath,'Photo')" *ngIf="this.request.AttchFilePath !=''">
                        <i class="ti ti-trash"></i>
                      </a>
                    </div>-->
                    </div>
                  </div>

                  <div class="col-lg-4 col-md-6 col-sm-12 col-12 mb-3">
                    <label class="text-gray-800 text-sm font-medium inline-block mb-1">Comment Enquiry/Suggestions</label>
                    <textarea type="text" class="form-input  form-control" placeholder="Enter Enquiry/Suggestions" formControlName="Comment" [(ngModel)]="request.Comment"></textarea>
                    <div *ngIf="isSubmitted && _CitizenSuggestionFormGroup.Comment.errors" class="text-danger">
                      <p *ngIf="_CitizenSuggestionFormGroup.Comment.errors.required">
                        <i aria-hidden="true"></i> Comment Enquiry/Suggestions field is required.!
                      </p>
                    </div>
                  </div>

                </div>

                <div class="col-lg-4 col-md-6 col-sm-12 col-12 mt-3" id="box_Form_Button">
                  <button class="btn bg-info text-white" type="button" (click)="SaveData()">Submit</button>
                  <button class="btn bg-danger text-white ml-1" type="button" (click)="ResetControl()">Reset</button>
                </div>
              </div> <!-- End ngSwitch wrapper -->


            </div>
          </div>
        </form>




        <ng-template #MyModel_SRQuery let-modal class="w-full h-full fixed top-0 left-0 z-[80] transition-all duration-500 overflow-y-auto [--overlay-backdrop:static] ">
          <div class="modal-content">
            <div class="modal-header flex justify-between items-center">
              <b>SR-No</b>
              <button class="btn bg-info text-white" (click)="OnOkClick()"><i class="ti ti-x"></i></button>
            </div>
            <div class="modal-body p-5">
              <div class="text-center p-5">
                <p class="text-lg font-semibold">Your SR No is: {{generatedSRNo}}</p>
              </div>
            </div>
            <div class="modal-footer text-center">
              <button type="button" class="btn bg-info text-white mt-6" (click)="OnOkClick()">OK</button>
            </div>
          </div>
        </ng-template>
      </div>
    </div>
  </div>
</div>


